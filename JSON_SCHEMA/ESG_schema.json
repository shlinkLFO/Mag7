{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Mag7 Energy & ESG Data (2015-2025)",
    "description": "Schema for tracking energy sourcing, emissions, and resource usage for the Magnificent Seven companies.",
    "type": "object",
    "properties": {
      "dataset_metadata": {
        "type": "object",
        "properties": {
          "last_updated": { "type": "string", "format": "date" },
          "maintainer": { "type": "string" }
        }
      },
      "companies": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["company_name", "ticker", "yearly_data"],
          "properties": {
            "company_name": {
              "type": "string",
              "enum": ["Apple", "Microsoft", "Alphabet", "Amazon", "NVIDIA", "Meta", "Tesla"]
            },
            "ticker": {
              "type": "string",
              "enum": ["AAPL", "MSFT", "GOOG/GOOGL", "AMZN", "NVDA", "META", "TSLA"]
            },
            "yearly_data": {
              "type": "array",
              "items": { "$ref": "#/definitions/annual_record" }
            }
          }
        }
      }
    },
    "definitions": {
      "annual_record": {
        "type": "object",
        "required": ["year"],
        "properties": {
          "year": { "type": "integer", "minimum": 2015, "maximum": 2025 },
          "source_metadata": {
            "type": "object",
            "properties": {
              "document_type": { "type": "string" },
              "url": { "type": "string" }
            }
          },
          "emissions_mtco2e": {
            "type": "object",
            "properties": {
              "scope_1": { "type": ["number", "null"] },
              "scope_2_market_based": { "type": ["number", "null"] },
              "scope_2_location_based": { "type": ["number", "null"] },
              "scope_3_total": { "type": ["number", "null"] }
            }
          },
          "energy_consumption": {
            "type": "object",
            "properties": {
              "total_consumption_mwh": { "type": ["number", "null"] },
              "clean_energy_percentage": { "type": ["number", "null"] },
              "pue": { "type": ["number", "null"] }
            }
          },
          "water_metrics": {
              "type": "object",
              "properties": {
                  "unit": {"type": "string"},
                  "withdrawal": {"type": ["number", "null"]},
                  "consumption": {"type": ["number", "null"]}
              }
          }
        }
      }
    }
  }